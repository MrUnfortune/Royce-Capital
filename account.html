<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@codewith_muhilan</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #0c0c0c;
            color: #c6c6c6
        }

          .container {
            display: grid;
            grid-template-rows: 80px auto 1fr auto 50px;
            grid-template-columns: 1fr 4fr 1fr;
            height: 100vh;
            grid-template-areas:
                "header        header        header"
                "left-aside    banner        right-aside"
                "left-aside    main          right-aside"
                "left-aside    low-content   right-aside"
                "footer        footer        footer";
            grid-gap: 10px;  padding: 10px;
            font-weight: 600;  font-size: 20px;
          }

        .header {
            grid-area: header;
            background-color: #0c0c0c;
            padding: 10px 0px 0px 0px;
            text-align: left;
            position: relative;
        }
        
        .underline{
            max-width: calc(100%-40px);
            height: 1px;
            background-color: #a6a6a6;
            margin-top: 15px;
            margin-right: 120px;
            margin-left: 120px;
        }

        .left-aside {
            grid-area: left-aside;
            background-color: #0c0c0c;
            padding: 20px;
        }

        .main {
            grid-area: main;
            background-color: #0c0c0c;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .logo-img{
            width: 100%;
            max-width: 220px;
            height: auto;
            object-fit: contain;
            align-self: center;
            padding: 0px 0px 0px 0px;
            margin-left: 120px;
        }

        .banner {
            grid-area: banner;
            background-color: #0c0c0c;
            padding: 20px;
            text-align: center;
        }

        .right-aside {
            grid-area: right-aside;
            background-color: #0c0c0c;
            padding: 20px;
        }

        .low-content {
            grid-area: low-content;
            background-color: #0c0c0c;
            padding: 20px;
        }

        .footer {
            grid-area: footer;
            background-color: 
            padding: 20px;
            text-align: center;
        }



        @media (max-width: 678px) {
        .container {
          grid-template-rows: 50px 50px 50px 1fr 
          50px 50px 50px;
          grid-template-columns: 1fr;
          grid-template-areas:
            "header"
            "banner"
            "left-aside"
            "main"
            "right-aside"
            "low-content"
            "footer";
            }
            
        .logo-img{
                width: 100%;
                max-width: 180px;
                padding: 0px 0px 0px 0px;
                margin-left: 100px;
            }
            
        .underline{
            max-width: calc(100%-40px);
            height: 1px;
            background-color: #a6a6a6;
            margin-top: 15px;
            margin-right: 25px;
            margin-left: 25px;
        }   
        }


    </style>
</head>

<body>
    <div class="container">
        <header class="header">
            <img src="logowithoutunder.png" alt="logo" class="logo-img">
            <div class="underline"></div>
        </header>
        <aside class="left-aside"></aside>
        <main class="main" style="display: flex; flex-direction: column; gap: 15px;">
            <h3></h3>
        </main>
        <section class="banner"></section>
        <aside class="right-aside"></aside>
        <section class="low-content"></section>
        <footer class="footer"></footer>
    </div>

    <script>
        function updateDimensions() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            document.getElementById('width').textContent = width;
            document.getElementById('height').textContent = height;
        }

        window.addEventListener('resize', updateDimensions); 
        document.addEventListener('DOMContentLoaded', updateDimensions);
        
        const urlParams = new URLSearchParams(window.location.search);
  const token = urlParams.get('token');

  if (token) {
    // Сохраняем токен и получаем данные через doGet
    fetch(`https://script.google.com/macros/s/AKfycby31WtHhXivSUxpFDct7EBPN5vm4SusPgqsqGNrrL-IRsgyh-ruxMmMe6zbVmm71ANJ/exec?token=${encodeURIComponent(token)}`)
      .then(res => res.json())
      .then(data => {
        if (data.valid) {
          localStorage.setItem('authToken', token);
          localStorage.setItem('userId', data.userId);
          localStorage.setItem('userFullname', data.fullname);
          localStorage.setItem('userMoney', data.money);
          // Удаляем token из URL для чистоты
          history.replaceState(null, null, window.location.pathname);
        } else {
          alert('Сессия недействительна. Пожалуйста, войдите снова.');
          window.location.href = 'enter.html';
        }
      })
      .catch(err => {
        console.error('Ошибка загрузки данных:', err);
        alert('Не удалось загрузить данные. Обновите страницу.');
      });
  } else {
    // Если нет токена — пользователь зашёл напрямую
    if (!localStorage.getItem('authToken')) {
      alert('Сессия истекла. Пожалуйста, войдите снова.');
      window.location.href = 'enter.html';
    }
  }
        
    </script>
</body>

</html>
